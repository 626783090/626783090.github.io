<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="ä»£æ™¨ä¼Ÿ"><meta name="copyright" content="ä»£æ™¨ä¼Ÿ"><meta name="generator" content="Hexo 5.2.0"><meta name="theme" content="hexo-theme-yun"><title>mybatisç¬”è®° | èåº­éœ²æ°¸ç´ä¹¦æ¶¦ å±±éƒ­æœˆæ˜ç §æµé¥</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.22/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_ed8vp4atwoj.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="shortcut icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"www.daichenwei.cn","root":"/","title":"ä»£æ™¨ä¼Ÿçš„åšå®¢","version":"1.3.0","mode":"auto","copycode":true,"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=UA-121354150-1"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-121354150-1');
}</script><script data-ad-client="ca-pub-2245427233262012" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><meta name="description" content="MyBatis1ã€ç®€ä»‹1.1 ä»€ä¹ˆæ˜¯Mybatis   MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶; å®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­">
<meta property="og:type" content="article">
<meta property="og:title" content="mybatisç¬”è®°">
<meta property="og:url" content="http://www.daichenwei.cn/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="èåº­éœ²æ°¸ç´ä¹¦æ¶¦ å±±éƒ­æœˆæ˜ç §æµé¥">
<meta property="og:description" content="MyBatis1ã€ç®€ä»‹1.1 ä»€ä¹ˆæ˜¯Mybatis   MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶; å®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.daichenwei.cn/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/image-20210220181349656.png">
<meta property="og:image" content="http://www.daichenwei.cn/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/mybatis%E7%AC%94%E8%AE%B0%5Cimage-20210220182520346.png">
<meta property="og:image" content="http://www.daichenwei.cn/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/mybatis%E7%AC%94%E8%AE%B0%5Cimage-20210220182701456.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200623164845962.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200623164853569.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200623164901861.png">
<meta property="og:image" content="http://www.daichenwei.cn/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/blog/source_posts/mybatisç¬”è®°/image-20210220182843576.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2020062316493391.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200623164958936.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="http://www.daichenwei.cn/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/blog/source_posts/mybatisç¬”è®°/image-20210220183329197.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200623165030775.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200623165052167.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="http://www.daichenwei.cn/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/blog/source_posts/mybatisç¬”è®°/20200623165129955.png">
<meta property="og:image" content="http://www.daichenwei.cn/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/blog/source_posts/mybatisç¬”è®°/20200623165404113.png">
<meta property="article:published_time" content="2021-02-19T16:00:00.000Z">
<meta property="article:modified_time" content="2021-02-22T07:57:24.049Z">
<meta property="article:author" content="ä»£æ™¨ä¼Ÿ">
<meta property="article:tag" content="mybatis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.daichenwei.cn/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/image-20210220181349656.png"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="ä»£æ™¨ä¼Ÿ"><img width="96" loading="lazy" src="/image/Headportrait.jpg" alt="ä»£æ™¨ä¼Ÿ"><span class="site-author-status" title="æ°¸è¿œç›¸ä¿¡ç¾å¥½çš„äº‹æƒ…å³å°†å‘ç”Ÿ">ğŸ˜Š</span></a><div class="site-author-name"><a href="/about/">ä»£æ™¨ä¼Ÿ</a></div><a class="site-name" href="/about/site.html">èåº­éœ²æ°¸ç´ä¹¦æ¶¦ å±±éƒ­æœˆæ˜ç §æµé¥</a><sub class="site-subtitle"></sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">21</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">3</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">12</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://github.com/626783090/626783090.github.io" title="github"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clipboard-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MyBatis"><span class="toc-number">1.</span> <span class="toc-text">MyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">1ã€ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E4%BB%80%E4%B9%88%E6%98%AFMybatis"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 ä»€ä¹ˆæ˜¯Mybatis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 æŒä¹…åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E6%8C%81%E4%B9%85%E5%B1%82"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 æŒä¹…å±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81MyBatis"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.4 ä¸ºä»€ä¹ˆéœ€è¦MyBatis</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E7%AC%AC%E4%B8%80%E4%B8%AAMybatis%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.2.</span> <span class="toc-text">2ã€ç¬¬ä¸€ä¸ªMybatisç¨‹åº</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 æ­å»ºç¯å¢ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%A8%A1%E5%9D%97"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 åˆ›å»ºä¸€ä¸ªæ¨¡å—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 ç¼–å†™ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81CURD"><span class="toc-number">1.3.</span> <span class="toc-text">3ã€CURD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-namespace"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. namespace</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-select"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. select</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Insert"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. Insert</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-update"><span class="toc-number">1.3.4.</span> <span class="toc-text">4. update</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Delete"><span class="toc-number">1.3.5.</span> <span class="toc-text">5. Delete</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E4%B8%87%E8%83%BDMap"><span class="toc-number">1.3.6.</span> <span class="toc-text">6. ä¸‡èƒ½Map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.3.7.</span> <span class="toc-text">7. æ¨¡ç³ŠæŸ¥è¯¢</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90"><span class="toc-number">1.4.</span> <span class="toc-text">4ã€é…ç½®è§£æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. æ ¸å¿ƒé…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-environments"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. ç¯å¢ƒé…ç½® environments</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%B1%9E%E6%80%A7-properties"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. å±æ€§ properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D-typeAliases"><span class="toc-number">1.4.4.</span> <span class="toc-text">4. ç±»å‹åˆ«å typeAliases</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%AE%BE%E7%BD%AE-Settings"><span class="toc-number">1.4.5.</span> <span class="toc-text">5. è®¾ç½® Settings</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE"><span class="toc-number">1.4.6.</span> <span class="toc-text">6. å…¶ä»–é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%98%A0%E5%B0%84%E5%99%A8-mappers"><span class="toc-number">1.4.7.</span> <span class="toc-text">7. æ˜ å°„å™¨ mappers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.4.8.</span> <span class="toc-text">8. ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E8%A7%A3%E5%86%B3%E5%B1%9E%E6%80%A7%E5%90%8D%E5%92%8C%E5%AD%97%E6%AE%B5%E5%90%8D%E4%B8%8D%E4%B8%80%E8%87%B4%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.5.</span> <span class="toc-text">5ã€è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%97%AE%E9%A2%98"><span class="toc-number">1.5.1.</span> <span class="toc-text">1. é—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-resultMap"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. resultMap</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E6%97%A5%E5%BF%97"><span class="toc-number">1.6.</span> <span class="toc-text">6ã€æ—¥å¿—</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E6%97%A5%E5%BF%97%E5%B7%A5%E5%8E%82"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1 æ—¥å¿—å·¥å‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-Log4j"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2 Log4j</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E5%88%86%E9%A1%B5"><span class="toc-number">1.7.</span> <span class="toc-text">7ã€åˆ†é¡µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E4%BD%BF%E7%94%A8Limit%E5%88%86%E9%A1%B5"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1 ä½¿ç”¨Limitåˆ†é¡µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-RowBounds%E5%88%86%E9%A1%B5"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2 RowBoundsåˆ†é¡µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6"><span class="toc-number">1.7.3.</span> <span class="toc-text">7.3 åˆ†é¡µæ’ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-number">1.8.</span> <span class="toc-text">8ã€ä½¿ç”¨æ³¨è§£å¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-number">1.8.1.</span> <span class="toc-text">8.1 é¢å‘æ¥å£å¼€å‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-number">1.8.2.</span> <span class="toc-text">8.2 ä½¿ç”¨æ³¨è§£å¼€å‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E6%B3%A8%E8%A7%A3CURD"><span class="toc-number">1.8.3.</span> <span class="toc-text">8.3 æ³¨è§£CURD</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9%E3%80%81Lombok"><span class="toc-number">1.9.</span> <span class="toc-text">9ã€Lombok</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E3%80%81%E5%A4%9A%E5%AF%B9%E4%B8%80%E5%A4%84%E7%90%86"><span class="toc-number">1.10.</span> <span class="toc-text">10ã€å¤šå¯¹ä¸€å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">1.10.1.</span> <span class="toc-text">1. æµ‹è¯•ç¯å¢ƒæ­å»º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8C%89%E7%85%A7%E6%9F%A5%E8%AF%A2%E5%B5%8C%E5%A5%97%E5%A4%84%E7%90%86"><span class="toc-number">1.10.2.</span> <span class="toc-text">2. æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8C%89%E7%85%A7%E7%BB%93%E6%9E%9C%E5%B5%8C%E5%A5%97%E5%A4%84%E7%90%86"><span class="toc-number">1.10.3.</span> <span class="toc-text">3.æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E3%80%81%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%A4%84%E7%90%86"><span class="toc-number">1.11.</span> <span class="toc-text">11ã€ä¸€å¯¹å¤šå¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">1.11.1.</span> <span class="toc-text">1. ç¯å¢ƒæ­å»º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8C%89%E7%85%A7%E7%BB%93%E6%9E%9C%E5%B5%8C%E5%A5%97%E5%B5%8C%E5%A5%97%E5%A4%84%E7%90%86"><span class="toc-number">1.11.2.</span> <span class="toc-text">2. æŒ‰ç…§ç»“æœåµŒå¥—åµŒå¥—å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">1.11.3.</span> <span class="toc-text">å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12%E3%80%81%E5%8A%A8%E6%80%81SQL"><span class="toc-number">1.12.</span> <span class="toc-text">12ã€åŠ¨æ€SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83"><span class="toc-number">1.12.1.</span> <span class="toc-text">æ­å»ºç¯å¢ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IF"><span class="toc-number">1.12.2.</span> <span class="toc-text">IF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#choose-when-otherwise"><span class="toc-number">1.12.3.</span> <span class="toc-text">choose (when, otherwise)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#trim%E3%80%81where%E3%80%81set"><span class="toc-number">1.12.4.</span> <span class="toc-text">trimã€whereã€set</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E7%89%87%E6%AE%B5"><span class="toc-number">1.12.5.</span> <span class="toc-text">SQLç‰‡æ®µ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13%E3%80%81%E7%BC%93%E5%AD%98"><span class="toc-number">1.13.</span> <span class="toc-text">13ã€ç¼“å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.13.1.</span> <span class="toc-text">13.1 ç®€ä»‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-MyBatis%E7%BC%93%E5%AD%98"><span class="toc-number">1.13.2.</span> <span class="toc-text">13.2 MyBatisç¼“å­˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">1.13.3.</span> <span class="toc-text">13.3 ä¸€çº§ç¼“å­˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-4-%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">1.13.4.</span> <span class="toc-text">13.4 äºŒçº§ç¼“å­˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86"><span class="toc-number">1.13.5.</span> <span class="toc-text">13.5 ç¼“å­˜åŸç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BC%93%E5%AD%98-ehcache"><span class="toc-number">1.13.6.</span> <span class="toc-text">13.6 è‡ªå®šä¹‰ç¼“å­˜-ehcache</span></a></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://www.daichenwei.cn/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="ä»£æ™¨ä¼Ÿ"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="èåº­éœ²æ°¸ç´ä¹¦æ¶¦ å±±éƒ­æœˆæ˜ç §æµé¥"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">mybatisç¬”è®°</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="åˆ›å»ºæ—¶é—´ï¼š2021-02-20 00:00:00" itemprop="dateCreated datePublished" datetime="2021-02-20T00:00:00+08:00">2021-02-20</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-22 15:57:24" itemprop="dateModified" datetime="2021-02-22T15:57:24+08:00">2021-02-22</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/%E7%AC%94%E8%AE%B0/" style="--text-color:dimgray" itemprop="url" rel="index"><span itemprop="text">ç¬”è®°</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag" href="/tags/mybatis/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">mybatis</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><h2 id="1ã€ç®€ä»‹"><a href="#1ã€ç®€ä»‹" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯Mybatis"><a href="#1-1-ä»€ä¹ˆæ˜¯Mybatis" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯Mybatis"></a>1.1 ä»€ä¹ˆæ˜¯Mybatis</h3><img src="/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/image-20210220181349656.png" alt="image-20210220181349656" style="zoom:50%;" loading="lazy">

<ul>
<li><strong>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶;</strong></li>
<li>å®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</li>
</ul>
<h3 id="1-2-æŒä¹…åŒ–"><a href="#1-2-æŒä¹…åŒ–" class="headerlink" title="1.2 æŒä¹…åŒ–"></a>1.2 æŒä¹…åŒ–</h3><p>æ•°æ®æŒä¹…åŒ–</p>
<ul>
<li>æŒä¹…åŒ–å°±æ˜¯å°†ç¨‹åºçš„æ•°æ®åœ¨æŒä¹…çŠ¶æ€å’Œç¬æ—¶çŠ¶æ€è½¬åŒ–çš„è¿‡ç¨‹</li>
<li>å†…å­˜ï¼š<strong>æ–­ç”µå³å¤±</strong></li>
<li>æ•°æ®åº“ï¼ˆJdbcï¼‰,ioæ–‡ä»¶æŒä¹…åŒ–ã€‚</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆè¦æŒä¹…åŒ–ï¼Ÿ</strong></p>
<ul>
<li>æœ‰ä¸€äº›å¯¹è±¡ï¼Œä¸èƒ½è®©ä»–ä¸¢æ‰</li>
<li>å†…å­˜å¤ªè´µ</li>
</ul>
<h3 id="1-3-æŒä¹…å±‚"><a href="#1-3-æŒä¹…å±‚" class="headerlink" title="1.3 æŒä¹…å±‚"></a>1.3 æŒä¹…å±‚</h3><p>Daoå±‚ã€Serviceå±‚ã€Controllerå±‚</p>
<ul>
<li>å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å—</li>
<li>å±‚ç•Œé™ååˆ†æ˜æ˜¾</li>
</ul>
<h3 id="1-4-ä¸ºä»€ä¹ˆéœ€è¦MyBatis"><a href="#1-4-ä¸ºä»€ä¹ˆéœ€è¦MyBatis" class="headerlink" title="1.4 ä¸ºä»€ä¹ˆéœ€è¦MyBatis"></a>1.4 ä¸ºä»€ä¹ˆéœ€è¦MyBatis</h3><ul>
<li>å¸®åŠ©ç¨‹åºå‘˜å°†æ•°æ®å­˜å…¥åˆ°æ•°æ®åº“ä¸­</li>
<li>æ–¹ä¾¿</li>
<li>ä¼ ç»Ÿçš„JDBCä»£ç å¤ªå¤æ‚äº†ï¼Œç®€åŒ–ï¼Œæ¡†æ¶ï¼Œè‡ªåŠ¨åŒ–</li>
<li>ä¸ç”¨MyBatisä¹Ÿå¯ä»¥ï¼ŒæŠ€æœ¯æ²¡æœ‰é«˜ä½ä¹‹åˆ†</li>
<li>ä¼˜ç‚¹ï¼š<ul>
<li>ç®€å•æ˜“å­¦</li>
<li>çµæ´»</li>
<li>sqlå’Œä»£ç çš„åˆ†ç¦»ï¼Œæé«˜äº†å¯ç»´æŠ¤æ€§ã€‚</li>
<li>æä¾›æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡ä¸æ•°æ®åº“çš„ormå­—æ®µå…³ç³»æ˜ å°„</li>
<li>æä¾›å¯¹è±¡å…³ç³»æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡å…³ç³»ç»„å»ºç»´æŠ¤</li>
<li>æä¾›xmlæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€sql</li>
</ul>
</li>
</ul>
<h2 id="2ã€ç¬¬ä¸€ä¸ªMybatisç¨‹åº"><a href="#2ã€ç¬¬ä¸€ä¸ªMybatisç¨‹åº" class="headerlink" title="2ã€ç¬¬ä¸€ä¸ªMybatisç¨‹åº"></a>2ã€ç¬¬ä¸€ä¸ªMybatisç¨‹åº</h2><p>æ€è·¯ï¼šæ­å»ºç¯å¢ƒ â€“&gt; å¯¼å…¥MyBatis â€“&gt; ç¼–å†™ä»£ç  â€“&gt; æµ‹è¯•</p>
<h3 id="2-1-æ­å»ºç¯å¢ƒ"><a href="#2-1-æ­å»ºç¯å¢ƒ" class="headerlink" title="2.1 æ­å»ºç¯å¢ƒ"></a>2.1 æ­å»ºç¯å¢ƒ</h3><p>æ–°å»ºé¡¹ç›®</p>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ªæ™®é€šçš„mavené¡¹ç›®</p>
</li>
<li><p>åˆ é™¤srcç›®å½• ï¼ˆå°±å¯ä»¥æŠŠæ­¤å·¥ç¨‹å½“åšçˆ¶å·¥ç¨‹äº†ï¼Œç„¶ååˆ›å»ºå­å·¥ç¨‹ï¼‰</p>
</li>
<li><p>å¯¼å…¥mavenä¾èµ–</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--å¯¼å…¥ä¾èµ–--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--mysqlqé©±åŠ¨--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>8.0.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--mybatis--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.5.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--junit--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªModule</p>
</li>
</ol>
<h3 id="2-2-åˆ›å»ºä¸€ä¸ªæ¨¡å—"><a href="#2-2-åˆ›å»ºä¸€ä¸ªæ¨¡å—" class="headerlink" title="2.2 åˆ›å»ºä¸€ä¸ªæ¨¡å—"></a>2.2 åˆ›å»ºä¸€ä¸ªæ¨¡å—</h3><ul>
<li>ç¼–å†™mybatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</li>
</ul>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Config 3.0//EN"</span>
        <span class="token string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!--configurationæ ¸å¿ƒé…ç½®æ–‡ä»¶--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>JDBC<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POOLED<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/mybatis?userSSL=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=UTF-8<span class="token entity named-entity" title="&amp;">&amp;amp;</span>serverTimezone=UTC<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre>

<ul>
<li>ç¼–å†™mybatiså·¥å…·ç±»</li>
</ul>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//sqlSessionFactory --> sqlSession</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisUtils</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">static</span> <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">//ä½¿ç”¨Mybatisç¬¬ä¸€æ­¥ ï¼šè·å–sqlSessionFactoryå¯¹è±¡</span>
            <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">"mybatis-config.xml"</span><span class="token punctuation">;</span>
            <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
            sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">//æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹.</span>
    <span class="token comment">// SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSession</span> <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="2-3-ç¼–å†™ä»£ç "><a href="#2-3-ç¼–å†™ä»£ç " class="headerlink" title="2.3 ç¼–å†™ä»£ç "></a>2.3 ç¼–å†™ä»£ç </h3><ul>
<li><p>å®ä½“ç±»</p>
</li>
<li><p>Daoæ¥å£</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>
</li>
<li><p>æ¥å£å®ç°ç±» ï¼ˆç”±åŸæ¥çš„UserDaoImplè½¬å˜ä¸ºä¸€ä¸ªMapperé…ç½®æ–‡ä»¶ï¼‰</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>
        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">></span></span>

<span class="token comment">&lt;!--namespace=ç»‘å®šä¸€ä¸ªæŒ‡å®šçš„Dao/Mapperæ¥å£--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.kuang.dao.UserDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getUserList<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.kuang.pojo.User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    select * from USER
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>æµ‹è¯•</p>
<p><strong>æ³¨æ„ç‚¹ï¼š</strong></p>
<p>org.apache.ibatis.binding.BindingException: Type interface com.kuang.dao.UserDao is not known to the MapperRegistry.</p>
<p><strong>MapperRegistryæ˜¯ä»€ä¹ˆ?</strong></p>
<p>æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œmappers</p>
</li>
<li><p>junitæµ‹è¯•</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  
    <span class="token comment">//1.è·å–SqlSessionå¯¹è±¡</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2.æ‰§è¡ŒSQL</span>
    <span class="token comment">// æ–¹å¼ä¸€ï¼šgetMapper</span>
    <span class="token class-name">UserDao</span> userDao <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> userList <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> userList<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  
    <span class="token comment">//å…³é—­sqlSession</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

</li>
</ul>
<p><strong>å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼š</strong></p>
<ol>
<li>é…ç½®æ–‡ä»¶æ²¡æœ‰æ³¨å†Œ</li>
<li>ç»‘å®šæ¥å£é”™è¯¯</li>
<li>æ–¹æ³•åä¸å¯¹</li>
<li>è¿”å›ç±»å‹ä¸å¯¹</li>
<li>Mavenå¯¼å‡ºèµ„æºé—®é¢˜</li>
</ol>
<h2 id="3ã€CURD"><a href="#3ã€CURD" class="headerlink" title="3ã€CURD"></a>3ã€CURD</h2><h3 id="1-namespace"><a href="#1-namespace" class="headerlink" title="1. namespace"></a>1. namespace</h3><p>namespaceä¸­çš„åŒ…åè¦å’ŒDao/Mapperæ¥å£çš„åŒ…åä¸€è‡´</p>
<h3 id="2-select"><a href="#2-select" class="headerlink" title="2. select"></a>2. select</h3><p>é€‰æ‹©ï¼ŒæŸ¥è¯¢è¯­å¥ï¼›</p>
<ul>
<li><p>idï¼šå°±æ˜¯å¯¹åº”çš„namespaceä¸­çš„æ–¹æ³•åï¼›</p>
</li>
<li><p>resultType : Sqlè¯­å¥æ‰§è¡Œçš„è¿”å›å€¼ï¼›</p>
</li>
<li><p>parameterType : å‚æ•°ç±»å‹ï¼›</p>
<ol>
<li><p>ç¼–å†™æ¥å£</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//æ’å…¥ç”¨æˆ·</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>
</li>
<li><p>ç¼–å†™å¯¹åº”çš„mapperä¸­çš„sqlè¯­å¥</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>addUser<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.kuang.pojo.User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    insert into user (id,name,password) values (#&#123;id&#125;, #&#123;name&#125;, #&#123;password&#125;)
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>æµ‹è¯•</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">User</span> user  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"é»‘å­"</span><span class="token punctuation">,</span><span class="token string">"666"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mapper<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//å¢åˆ æ”¹ä¸€å®šè¦æäº¤äº‹åŠ¡</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//å…³é—­sqlSession</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><strong>æ³¨æ„ï¼šå¢åˆ æ”¹æŸ¥ä¸€å®šè¦æäº¤äº‹åŠ¡ï¼š</strong></p>
<pre class="language-java" data-language="java"><code class="language-java">sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

</li>
</ol>
</li>
</ul>
<h3 id="3-Insert"><a href="#3-Insert" class="headerlink" title="3. Insert"></a>3. Insert</h3><h3 id="4-update"><a href="#4-update" class="headerlink" title="4. update"></a>4. update</h3><h3 id="5-Delete"><a href="#5-Delete" class="headerlink" title="5. Delete"></a>5. Delete</h3><h3 id="6-ä¸‡èƒ½Map"><a href="#6-ä¸‡èƒ½Map" class="headerlink" title="6. ä¸‡èƒ½Map"></a>6. ä¸‡èƒ½Map</h3><p>å‡è®¾ï¼Œæˆ‘ä»¬çš„å®ä½“ç±»ï¼Œæˆ–è€…æ•°æ®åº“ä¸­çš„è¡¨ï¼Œå­—æ®µæˆ–è€…å‚æ•°è¿‡å¤šï¼Œæˆ‘ä»¬åº”è¯¥è€ƒè™‘ä½¿ç”¨Map!</p>
<ul>
<li>UserMapperæ¥å£</li>
</ul>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//ç”¨ä¸‡èƒ½Mapæ’å…¥ç”¨æˆ·</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUser2</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<ul>
<li>UserMapper.xml</li>
</ul>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--å¯¹è±¡ä¸­çš„å±æ€§å¯ä»¥ç›´æ¥å–å‡ºæ¥ ä¼ é€’mapçš„key--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>addUser2<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    insert into user (id,name,password) values (#&#123;userid&#125;,#&#123;username&#125;,#&#123;userpassword&#125;)
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span></code></pre>

<ul>
<li>æµ‹è¯•</li>
</ul>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"userid"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"ç‹è™"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"userpassword"</span><span class="token punctuation">,</span><span class="token number">789</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mapper<span class="token punctuation">.</span><span class="token function">addUser2</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//æäº¤äº‹åŠ¡</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//å…³é—­èµ„æº</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>Mapä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å‡ºkeyå³å¯ï¼ ã€parameter=â€œmapâ€ã€‘</p>
<p>å¯¹è±¡ä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å‡ºå¯¹è±¡çš„å±æ€§å³å¯ï¼ ã€parameter=â€œObjectâ€ã€‘</p>
<p>åªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥åœ¨sqlä¸­å–åˆ°</p>
<p>å¤šä¸ªå‚æ•°ç”¨Map , <strong>æˆ–è€…æ³¨è§£ï¼</strong></p>
</blockquote>
<h3 id="7-æ¨¡ç³ŠæŸ¥è¯¢"><a href="#7-æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="7. æ¨¡ç³ŠæŸ¥è¯¢"></a>7. æ¨¡ç³ŠæŸ¥è¯¢</h3><p>æ¨¡ç³ŠæŸ¥è¯¢è¿™ä¹ˆå†™ï¼Ÿ</p>
<ol>
<li><p>Javaä»£ç æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼ é€’é€šé…ç¬¦% %</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> userList <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getUserLike</span><span class="token punctuation">(</span><span class="token string">"%æ%"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li><p>åœ¨sqlæ‹¼æ¥ä¸­ä½¿ç”¨é€šé…ç¬¦(å¯èƒ½ä¼šå‡ºç°sqlæ³¨å…¥)</p>
<pre class="language-xml" data-language="xml"><code class="language-xml">select * from user where name like "%"#&#123;value&#125;"%"</code></pre>

</li>
</ol>
<h2 id="4ã€é…ç½®è§£æ"><a href="#4ã€é…ç½®è§£æ" class="headerlink" title="4ã€é…ç½®è§£æ"></a>4ã€é…ç½®è§£æ</h2><h3 id="1-æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#1-æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="1. æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>1. æ ¸å¿ƒé…ç½®æ–‡ä»¶</h3><ul>
<li><p>mybatis-config.xml</p>
</li>
<li><p>Mybatisçš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“MyBatisè¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚</p>
<pre class="language-xml" data-language="xml"><code class="language-xml">configurationï¼ˆé…ç½®ï¼‰
    propertiesï¼ˆå±æ€§ï¼‰
    settingsï¼ˆè®¾ç½®ï¼‰
    typeAliasesï¼ˆç±»å‹åˆ«åï¼‰
    typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰
    objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰
    pluginsï¼ˆæ’ä»¶ï¼‰
    environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰
    	environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰
    		transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰
    		dataSourceï¼ˆæ•°æ®æºï¼‰
    databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰
    mappersï¼ˆæ˜ å°„å™¨ï¼‰</code></pre>

</li>
</ul>
<h3 id="2-ç¯å¢ƒé…ç½®-environments"><a href="#2-ç¯å¢ƒé…ç½®-environments" class="headerlink" title="2. ç¯å¢ƒé…ç½® environments"></a>2. ç¯å¢ƒé…ç½® environments</h3><p>MyBatis å¯ä»¥é…ç½®æˆé€‚åº”å¤šç§ç¯å¢ƒ</p>
<p><strong>ä¸è¿‡è¦è®°ä½ï¼šå°½ç®¡å¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory å®ä¾‹åªèƒ½é€‰æ‹©ä¸€ç§ç¯å¢ƒ</strong></p>
<p>å­¦ä¼šä½¿ç”¨é…ç½®å¤šå¥—è¿è¡Œç¯å¢ƒï¼</p>
<p>MyBatisé»˜è®¤çš„äº‹åŠ¡ç®¡ç†å™¨å°±æ˜¯JDBC ï¼Œè¿æ¥æ± ï¼šPOOLED</p>
<h3 id="3-å±æ€§-properties"><a href="#3-å±æ€§-properties" class="headerlink" title="3. å±æ€§ properties"></a>3. å±æ€§ properties</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡propertieså±æ€§æ¥å®ç°å¼•ç”¨é…ç½®æ–‡ä»¶</p>
<p>è¿™äº›å±æ€§å¯ä»¥åœ¨å¤–éƒ¨è¿›è¡Œé…ç½®ï¼Œå¹¶å¯ä»¥è¿›è¡ŒåŠ¨æ€æ›¿æ¢ã€‚ä½ æ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®è¿™äº›å±æ€§ï¼Œä¹Ÿå¯ä»¥åœ¨ properties å…ƒç´ çš„å­å…ƒç´ ä¸­è®¾ç½®ã€‚ã€db.popertiesã€‘</p>
<ol>
<li><p>ç¼–å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶</p>
<p>db.properties</p>
<pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">driver</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.cj.jdbc.Driver</span>
<span class="token attr-name">url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/mybatis?userSSL=true&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC</span>
<span class="token attr-name">username</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
<span class="token attr-name">password</span><span class="token punctuation">=</span><span class="token attr-value">root</span></code></pre>
</li>
<li><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼•å…¥</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--å¼•ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>db.properties<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span></code></pre>

<ul>
<li>å¯ä»¥ç›´æ¥å¼•å…¥å¤–éƒ¨æ–‡ä»¶</li>
<li>å¯ä»¥åœ¨å…¶ä¸­å¢åŠ ä¸€äº›å±æ€§é…ç½®</li>
<li>å¦‚æœä¸¤ä¸ªæ–‡ä»¶æœ‰åŒä¸€ä¸ªå­—æ®µï¼Œä¼˜å…ˆä½¿ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶çš„</li>
</ul>
</li>
</ol>
<h3 id="4-ç±»å‹åˆ«å-typeAliases"><a href="#4-ç±»å‹åˆ«å-typeAliases" class="headerlink" title="4. ç±»å‹åˆ«å typeAliases"></a>4. ç±»å‹åˆ«å typeAliases</h3><ul>
<li><p>ç±»å‹åˆ«åå¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªç¼©å†™åå­—ã€‚ å®ƒä»…ç”¨äº XML é…ç½®.</p>
</li>
<li><p>æ„åœ¨é™ä½å†—ä½™çš„å…¨é™å®šç±»åä¹¦å†™ã€‚</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.kuang.pojo.User<span class="token punctuation">"</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">></span></span></code></pre>

<p>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…ï¼Œæ¯ä¸€ä¸ªåœ¨åŒ… <code>domain.blog</code> ä¸­çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚ æ¯”å¦‚ <code>domain.blog.Author</code> çš„åˆ«åä¸º <code>author</code>,ï¼›è‹¥æœ‰æ³¨è§£ï¼Œåˆ™åˆ«åä¸ºå…¶æ³¨è§£å€¼ã€‚è§ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.kuang.pojo<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">></span></span></code></pre>

<blockquote>
<p>åœ¨å®ä½“ç±»æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ã€‚</p>
<p>å¦‚æœå®ä½“ç±»ååˆ†å¤šï¼Œå»ºè®®ç”¨ç¬¬äºŒç§æ‰«æåŒ…çš„æ–¹å¼ã€‚</p>
<p>ç¬¬ä¸€ç§å¯ä»¥DIYåˆ«åï¼Œç¬¬äºŒç§ä¸è¡Œï¼Œå¦‚æœéè¦æ”¹ï¼Œéœ€è¦åœ¨å®ä½“ä¸Šå¢åŠ æ³¨è§£ã€‚</p>
</blockquote>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Alias</span><span class="token punctuation">(</span><span class="token string">"author"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Author</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">&#125;</span></code></pre>

</li>
</ul>
<h3 id="5-è®¾ç½®-Settings"><a href="#5-è®¾ç½®-Settings" class="headerlink" title="5. è®¾ç½® Settings"></a>5. è®¾ç½® Settings</h3><p>è¿™æ˜¯ MyBatis ä¸­æä¸ºé‡è¦çš„è°ƒæ•´è®¾ç½®ï¼Œå®ƒä»¬ä¼šæ”¹å˜ MyBatis çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚</p>
<h3 id="6-å…¶ä»–é…ç½®"><a href="#6-å…¶ä»–é…ç½®" class="headerlink" title="6. å…¶ä»–é…ç½®"></a>6. å…¶ä»–é…ç½®</h3><ul>
<li><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</a></li>
<li><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/configuration.html#objectFactory">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</a></li>
<li>plugins æ’ä»¶<ul>
<li>mybatis-generator-core</li>
<li>mybatis-plus</li>
<li>é€šç”¨mapper</li>
</ul>
</li>
</ul>
<h3 id="7-æ˜ å°„å™¨-mappers"><a href="#7-æ˜ å°„å™¨-mappers" class="headerlink" title="7. æ˜ å°„å™¨ mappers"></a>7. æ˜ å°„å™¨ mappers</h3><p>MapperRegistryï¼šæ³¨å†Œç»‘å®šæˆ‘ä»¬çš„Mapperæ–‡ä»¶ï¼›</p>
<p>æ–¹å¼ä¸€ï¼šã€æ¨èä½¿ç”¨ã€‘</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--æ¯ä¸€ä¸ªMapper.xmléƒ½éœ€è¦åœ¨MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com/kuang/dao/UserMapper.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span></code></pre>

<p>æ–¹å¼äºŒï¼šä½¿ç”¨classæ–‡ä»¶ç»‘å®šæ³¨å†Œ</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--æ¯ä¸€ä¸ªMapper.xmléƒ½éœ€è¦åœ¨MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.kuang.dao.UserMapper<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span></code></pre>

<p><strong>æ³¨æ„ç‚¹ï¼š</strong></p>
<ul>
<li>æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åŒå</li>
<li>æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åœ¨åŒä¸€ä¸ªåŒ…ä¸‹</li>
</ul>
<p>æ–¹å¼ä¸‰ï¼šä½¿ç”¨åŒ…æ‰«æè¿›è¡Œæ³¨å…¥</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.kuang.dao<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span>
123</code></pre>

<h3 id="8-ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ"><a href="#8-ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="8. ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ"></a>8. ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ</h3><p><img src="/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/mybatis%E7%AC%94%E8%AE%B0%5Cimage-20210220182520346.png" alt="image-20210220182520346" loading="lazy"></p>
<p>å£°æ˜å‘¨æœŸå’Œä½œç”¨åŸŸæ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºé”™è¯¯çš„ä½¿ç”¨ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„<strong>å¹¶å‘é—®é¢˜</strong>ã€‚</p>
<p><strong>SqlSessionFactoryBuilder:</strong></p>
<ul>
<li>ä¸€æ—¦åˆ›å»ºäº†SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†</li>
<li>å±€éƒ¨å˜é‡</li>
</ul>
<p><strong>SqlSessionFactory:</strong></p>
<ul>
<li>è¯´ç™½äº†å°±å¯ä»¥æƒ³è±¡ä¸ºï¼šæ•°æ®åº“è¿æ¥æ± </li>
<li>SqlSessionFactoryä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ï¼Œ<strong>æ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚</strong></li>
<li>å› æ­¤SqlSessionFactoryçš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸï¼ˆApplocationContextï¼‰ã€‚</li>
<li>æœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨<strong>å•ä¾‹æ¨¡å¼</strong>æˆ–é™æ€å•ä¾‹æ¨¡å¼ã€‚</li>
</ul>
<p><strong>SqlSessionï¼š</strong></p>
<ul>
<li>è¿æ¥åˆ°è¿æ¥æ± çš„ä¸€ä¸ªè¯·æ±‚</li>
<li>SqlSession çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚</li>
<li>ç”¨å®Œä¹‹åéœ€è¦èµ¶ç´§å…³é—­ï¼Œå¦åˆ™èµ„æºè¢«å ç”¨ï¼</li>
</ul>
<p><img src="/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/mybatis%E7%AC%94%E8%AE%B0%5Cimage-20210220182701456.png" alt="image-20210220182701456" loading="lazy"></p>
<h2 id="5ã€è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜"><a href="#5ã€è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜" class="headerlink" title="5ã€è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜"></a>5ã€è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜</h2><h3 id="1-é—®é¢˜"><a href="#1-é—®é¢˜" class="headerlink" title="1. é—®é¢˜"></a>1. é—®é¢˜</h3><p>æ•°æ®åº“ä¸­çš„å­—æ®µ</p>
<p><img src="https://img-blog.csdnimg.cn/20200623164845962.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ‹·è´ä¹‹å‰çš„ï¼Œæµ‹è¯•å®ä½“ç±»å­—æ®µä¸ä¸€è‡´çš„æƒ…å†µ</p>
<p><img src="https://img-blog.csdnimg.cn/20200623164853569.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<p>æµ‹è¯•å‡ºç°é—®é¢˜<br><img src="https://img-blog.csdnimg.cn/20200623164901861.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<pre class="language-xml" data-language="xml"><code class="language-xml">// select * from user where id = #&#123;id&#125;
// ç±»å‹å¤„ç†å™¨
// select id,name,pwd from user where id = #&#123;id&#125;</code></pre>

<p>è§£å†³æ–¹æ³•ï¼š</p>
<ul>
<li>èµ·åˆ«å</li>
</ul>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getUserById<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.kuang.pojo.User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    select id,name,pwd as password from USER where id = #&#123;id&#125;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre>

<h3 id="2-resultMap"><a href="#2-resultMap" class="headerlink" title="2. resultMap"></a>2. resultMap</h3><p>ç»“æœé›†æ˜ å°„</p>
<blockquote>
<p>id name pwd</p>
<p>id name password</p>
</blockquote>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--ç»“æœé›†æ˜ å°„--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UserMap<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--columnæ•°æ®åº“ä¸­çš„å­—æ®µï¼Œpropertyå®ä½“ç±»ä¸­çš„å±æ€§--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pwd<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getUserList<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UserMap<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    select * from USER
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre>

<ul>
<li><code>resultMap</code> å…ƒç´ æ˜¯ MyBatis ä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ ã€‚</li>
<li>ResultMap çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹ç®€å•çš„è¯­å¥åšåˆ°é›¶é…ç½®ï¼Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥ï¼Œåªéœ€è¦æè¿°è¯­å¥ä¹‹é—´çš„å…³ç³»å°±è¡Œäº†ã€‚</li>
<li><code>ResultMap</code> çš„ä¼˜ç§€ä¹‹å¤„â€”â€”ä½ å®Œå…¨å¯ä»¥ä¸ç”¨æ˜¾å¼åœ°é…ç½®å®ƒä»¬ã€‚</li>
<li>å¦‚æœè¿™ä¸ªä¸–ç•Œæ€»æ˜¯è¿™ä¹ˆç®€å•å°±å¥½äº†ã€‚</li>
</ul>
<h2 id="6ã€æ—¥å¿—"><a href="#6ã€æ—¥å¿—" class="headerlink" title="6ã€æ—¥å¿—"></a>6ã€æ—¥å¿—</h2><h3 id="6-1-æ—¥å¿—å·¥å‚"><a href="#6-1-æ—¥å¿—å·¥å‚" class="headerlink" title="6.1 æ—¥å¿—å·¥å‚"></a>6.1 æ—¥å¿—å·¥å‚</h3><p>å¦‚æœä¸€ä¸ªæ•°æ®åº“æ“ä½œï¼Œå‡ºç°äº†å¼‚å¸¸ï¼Œæˆ‘ä»¬éœ€è¦æ’é”™ï¼Œæ—¥å¿—å°±æ˜¯æœ€å¥½çš„åŠ©æ‰‹ï¼</p>
<p>æ›¾ç»ï¼šsoutã€debug</p>
<p>ç°åœ¨ï¼šæ—¥å¿—å·¥å‚</p>
<p><img src="/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/blog\source_posts\mybatisç¬”è®°\image-20210220182843576.png" alt="image-20210220182843576" loading="lazy"></p>
<ul>
<li>SLF4J</li>
<li>LOG4J ã€æŒæ¡ã€‘</li>
<li>LOG4J2</li>
<li>JDK_LOGGING</li>
<li>COMMONS_LOGGING</li>
<li>STDOUT_LOGGING ã€æŒæ¡ã€‘</li>
<li>NO_LOGGING</li>
</ul>
<p>åœ¨MyBatisä¸­å…·ä½“ä½¿ç”¨å“ªä¸€ä¸ªæ—¥å¿—å®ç°ï¼Œåœ¨è®¾ç½®ä¸­è®¾å®š</p>
<p><strong>STDOUT_LOGGING</strong></p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logImpl<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>STDOUT_LOGGING<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">></span></span></code></pre>

<p><img src="https://img-blog.csdnimg.cn/2020062316493391.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<h3 id="6-2-Log4j"><a href="#6-2-Log4j" class="headerlink" title="6.2 Log4j"></a>6.2 Log4j</h3><p>ä»€ä¹ˆæ˜¯Log4jï¼Ÿ</p>
<ul>
<li>Log4jæ˜¯<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Apache/8512995">Apache</a>çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œé€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°æ˜¯<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%8E%A7%E5%88%B6%E5%8F%B0/2438626">æ§åˆ¶å°</a>ã€æ–‡ä»¶ã€<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/GUI">GUI</a>ç»„ä»¶ï¼›</li>
<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼›</li>
<li>é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹ï¼›</li>
<li>æœ€ä»¤äººæ„Ÿå…´è¶£çš„å°±æ˜¯ï¼Œè¿™äº›å¯ä»¥é€šè¿‡ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/286550">é…ç½®æ–‡ä»¶</a>æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç ã€‚</li>
</ul>
<ol>
<li><p>å…ˆå¯¼å…¥log4jçš„åŒ…</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>log4j.properties</p>
<pre class="language-xml" data-language="xml"><code class="language-xml">#å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç 
log4j.rootLogger=DEBUG,console,file

#æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®
log4j.appender.console = org.apache.log4j.ConsoleAppender
log4j.appender.console.Target = System.out
log4j.appender.console.Threshold=DEBUG
log4j.appender.console.layout = org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=[%c]-%m%n
#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®
log4j.appender.file = org.apache.log4j.RollingFileAppender
log4j.appender.file.File=./log/rzp.log
log4j.appender.file.MaxFileSize=10mb
log4j.appender.file.Threshold=DEBUG
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n
#æ—¥å¿—è¾“å‡ºçº§åˆ«
log4j.logger.org.mybatis=DEBUG
log4j.logger.java.sql=DEBUG
log4j.logger.java.sql.Statement=DEBUG
log4j.logger.java.sql.ResultSet=DEBUG
log4j.logger.java.sq1.PreparedStatement=DEBUG</code></pre>
</li>
<li><p>é…ç½®settingsä¸ºlog4jå®ç°</p>
</li>
<li><p>æµ‹è¯•è¿è¡Œ</p>
</li>
</ol>
<p><strong>Log4jç®€å•ä½¿ç”¨</strong></p>
<ol>
<li><p>åœ¨è¦ä½¿ç”¨Log4jçš„ç±»ä¸­ï¼Œå¯¼å…¥åŒ… import org.apache.log4j.Logger;</p>
</li>
<li><p>æ—¥å¿—å¯¹è±¡ï¼Œå‚æ•°ä¸ºå½“å‰ç±»çš„classå¯¹è±¡</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">UserDaoTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li><p>æ—¥å¿—çº§åˆ«</p>
<pre class="language-java" data-language="java"><code class="language-java">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"info: æµ‹è¯•log4j"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"debug: æµ‹è¯•log4j"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"error:æµ‹è¯•log4j"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<ol>
<li>info</li>
<li>debug</li>
<li>error</li>
</ol>
</li>
</ol>
<h2 id="7ã€åˆ†é¡µ"><a href="#7ã€åˆ†é¡µ" class="headerlink" title="7ã€åˆ†é¡µ"></a>7ã€åˆ†é¡µ</h2><p><strong>æ€è€ƒï¼šä¸ºä»€ä¹ˆåˆ†é¡µï¼Ÿ</strong></p>
<ul>
<li>å‡å°‘æ•°æ®çš„å¤„ç†é‡</li>
</ul>
<h3 id="7-1-ä½¿ç”¨Limitåˆ†é¡µ"><a href="#7-1-ä½¿ç”¨Limitåˆ†é¡µ" class="headerlink" title="7.1 ä½¿ç”¨Limitåˆ†é¡µ"></a>7.1 <strong>ä½¿ç”¨Limitåˆ†é¡µ</strong></h3><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">limit</span> startIndex<span class="token punctuation">,</span>pageSize </code></pre>

<p><strong>ä½¿ç”¨MyBatiså®ç°åˆ†é¡µï¼Œæ ¸å¿ƒSQL</strong></p>
<ol>
<li><p>æ¥å£</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//åˆ†é¡µ</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token function">getUserByLimit</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li><p>Mapper.xml</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--åˆ†é¡µæŸ¥è¯¢--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getUserByLimit<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UserMap<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    select * from user limit #&#123;startIndex&#125;,#&#123;pageSize&#125;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>æµ‹è¯•</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserByLimit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"startIndex"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"pageSize"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getUserByLimit</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

</li>
</ol>
<h3 id="7-2-RowBoundsåˆ†é¡µ"><a href="#7-2-RowBoundsåˆ†é¡µ" class="headerlink" title="7.2 RowBoundsåˆ†é¡µ"></a>7.2 RowBoundsåˆ†é¡µ</h3><p>ä¸å†ä½¿ç”¨SQLå®ç°åˆ†é¡µ</p>
<ol>
<li><p>æ¥å£</p>
<pre class="language-xml" data-language="xml"><code class="language-xml">//åˆ†é¡µ2
List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>User</span><span class="token punctuation">></span></span> getUserByRowBounds();</code></pre>
</li>
<li><p>mapper.xml</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--åˆ†é¡µæŸ¥è¯¢2--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getUserByRowBounds<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    select * from user limit
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>
1234</code></pre>
</li>
<li><p>æµ‹è¯•</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserByRowBounds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//RowBoundså®ç°</span>
    <span class="token class-name">RowBounds</span> rowBounds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RowBounds</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//é€šè¿‡Javaä»£ç å±‚é¢å®ç°åˆ†é¡µ</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> userList <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">"com.kaung.dao.UserMapper.getUserByRowBounds"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> rowBounds<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> userList<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

</li>
</ol>
<h3 id="7-3-åˆ†é¡µæ’ä»¶"><a href="#7-3-åˆ†é¡µæ’ä»¶" class="headerlink" title="7.3 åˆ†é¡µæ’ä»¶"></a>7.3 åˆ†é¡µæ’ä»¶</h3><p><img src="https://img-blog.csdnimg.cn/20200623164958936.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<h2 id="8ã€ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#8ã€ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="8ã€ä½¿ç”¨æ³¨è§£å¼€å‘"></a>8ã€ä½¿ç”¨æ³¨è§£å¼€å‘</h2><h3 id="8-1-é¢å‘æ¥å£å¼€å‘"><a href="#8-1-é¢å‘æ¥å£å¼€å‘" class="headerlink" title="8.1 é¢å‘æ¥å£å¼€å‘"></a>8.1 é¢å‘æ¥å£å¼€å‘</h3><p><strong>ä¸‰ä¸ªé¢å‘åŒºåˆ«</strong></p>
<ul>
<li>é¢å‘å¯¹è±¡æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥å¯¹è±¡ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å±æ€§å’Œæ–¹æ³•ï¼›</li>
<li>é¢å‘è¿‡ç¨‹æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥ä¸€ä¸ªå…·ä½“çš„æµç¨‹ï¼ˆäº‹åŠ¡è¿‡ç¨‹ï¼‰ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å®ç°ï¼›</li>
<li>æ¥å£è®¾è®¡ä¸éæ¥å£è®¾è®¡æ˜¯é’ˆå¯¹å¤ç”¨æŠ€æœ¯è€Œè¨€çš„ï¼Œä¸é¢å‘å¯¹è±¡ï¼ˆè¿‡ç¨‹ï¼‰ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæ›´å¤šçš„ä½“ç°å°±æ˜¯å¯¹ç³»ç»Ÿæ•´ä½“çš„æ¶æ„ï¼›</li>
</ul>
<h3 id="8-2-ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#8-2-ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="8.2 ä½¿ç”¨æ³¨è§£å¼€å‘"></a>8.2 ä½¿ç”¨æ³¨è§£å¼€å‘</h3><ol>
<li><p>æ³¨è§£åœ¨æ¥å£ä¸Šå®ç°</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from user"</span><span class="token punctuation">)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li><p>éœ€è¦åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ç»‘å®šæ¥å£</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.kuang.dao.UserMapper<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span>	</code></pre>
</li>
<li><p>æµ‹è¯•</p>
</li>
</ol>
<p>æœ¬è´¨ï¼šåå°„æœºåˆ¶å®ç°</p>
<p>åº•å±‚ï¼šåŠ¨æ€ä»£ç†<br><img src="/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/blog\source_posts\mybatisç¬”è®°\image-20210220183329197.png" alt="image-20210220183329197" loading="lazy"></p>
<p><strong>MyBatisè¯¦ç»†æ‰§è¡Œæµç¨‹</strong><br><img src="https://img-blog.csdnimg.cn/20200623165030775.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<h3 id="8-3-æ³¨è§£CURD"><a href="#8-3-æ³¨è§£CURD" class="headerlink" title="8.3 æ³¨è§£CURD"></a>8.3 æ³¨è§£CURD</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//æ–¹æ³•å­˜åœ¨å¤šä¸ªå‚æ•°ï¼Œæ‰€æœ‰çš„å‚æ•°å‰é¢å¿…é¡»åŠ ä¸Š@Param("id")æ³¨è§£</span>
<span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">"delete from user where id = $&#123;uid&#125;"</span><span class="token punctuation">)</span>
<span class="token keyword">int</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"uid"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p><strong>å…³äº@Param( )æ³¨è§£</strong></p>
<ul>
<li>åŸºæœ¬ç±»å‹çš„å‚æ•°æˆ–è€…Stringç±»å‹ï¼Œéœ€è¦åŠ ä¸Š</li>
<li>å¼•ç”¨ç±»å‹ä¸éœ€è¦åŠ </li>
<li>å¦‚æœåªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„è¯ï¼Œå¯ä»¥å¿½ç•¥ï¼Œä½†æ˜¯å»ºè®®å¤§å®¶éƒ½åŠ ä¸Š</li>
<li>æˆ‘ä»¬åœ¨SQLä¸­å¼•ç”¨çš„å°±æ˜¯æˆ‘ä»¬è¿™é‡Œçš„@Param()ä¸­è®¾å®šçš„å±æ€§å</li>
</ul>
<p><strong>#{} å’Œ ${}</strong></p>
<p>ä¸€èˆ¬ç”¨#{},å¯ä»¥æœ‰æ•ˆé˜²æ­¢sqlæ³¨å…¥     </p>
<h2 id="9ã€Lombok"><a href="#9ã€Lombok" class="headerlink" title="9ã€Lombok"></a>9ã€Lombok</h2><p>Lomboké¡¹ç›®æ˜¯ä¸€ä¸ªJavaåº“ï¼Œå®ƒä¼šè‡ªåŠ¨æ’å…¥ç¼–è¾‘å™¨å’Œæ„å»ºå·¥å…·ä¸­ï¼ŒLombokæä¾›äº†ä¸€ç»„æœ‰ç”¨çš„æ³¨é‡Šï¼Œç”¨æ¥æ¶ˆé™¤Javaç±»ä¸­çš„å¤§é‡æ ·æ¿ä»£ç ã€‚ä»…äº”ä¸ªå­—ç¬¦(@Data)å°±å¯ä»¥æ›¿æ¢æ•°ç™¾è¡Œä»£ç ä»è€Œäº§ç”Ÿå¹²å‡€ï¼Œç®€æ´ä¸”æ˜“äºç»´æŠ¤çš„Javaç±»ã€‚</p>
<p>ä½¿ç”¨æ­¥éª¤ï¼š</p>
<ol>
<li><p>åœ¨IDEAä¸­å®‰è£…Lombokæ’ä»¶</p>
</li>
<li><p>åœ¨é¡¹ç›®ä¸­å¯¼å…¥lombokçš„jaråŒ…</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.18.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>åœ¨ç¨‹åºä¸ŠåŠ æ³¨è§£</p>
</li>
</ol>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Getter</span> and <span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@FieldNameConstants</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token annotation punctuation">@EqualsAndHashCode</span>
<span class="token annotation punctuation">@AllArgsConstructor</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@RequiredArgsConstructor</span> and <span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@Log</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@Log4j</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@Log4j2</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@Slf4j</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@XSlf4j</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@CommonsLog</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@JBossLog</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@Flogger</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@CustomLog</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Builder</span>
<span class="token annotation punctuation">@SuperBuilder</span>
<span class="token annotation punctuation">@Singular</span>
<span class="token annotation punctuation">@Delegate</span>
<span class="token annotation punctuation">@Value</span>
<span class="token annotation punctuation">@Accessors</span>
<span class="token annotation punctuation">@Wither</span>
<span class="token annotation punctuation">@With</span>
<span class="token annotation punctuation">@SneakyThrows</span>
<span class="token annotation punctuation">@val</span></code></pre>

<p>è¯´æ˜ï¼š</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><img src="https://img-blog.csdnimg.cn/20200623165052167.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<h2 id="10ã€å¤šå¯¹ä¸€å¤„ç†"><a href="#10ã€å¤šå¯¹ä¸€å¤„ç†" class="headerlink" title="10ã€å¤šå¯¹ä¸€å¤„ç†"></a>10ã€å¤šå¯¹ä¸€å¤„ç†</h2><blockquote>
<p>å¤šä¸ªå­¦ç”Ÿä¸€ä¸ªè€å¸ˆï¼›    </p>
</blockquote>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fk_tid <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>tid<span class="token punctuation">)</span> <span class="token keyword">references</span> teacher<span class="token punctuation">(</span>id<span class="token punctuation">)</span></code></pre>

<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>teacher<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> teacher<span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'ç§¦è€å¸ˆ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>tid<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>fktid<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>tid<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">CONSTRAINT</span> <span class="token punctuation">`</span>fktid<span class="token punctuation">`</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>tid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token punctuation">`</span>teacher<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8INSERT <span class="token keyword">INTO</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>tid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'å°æ˜'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>tid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'å°çº¢'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>tid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'å°å¼ '</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>tid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">,</span> <span class="token string">'å°æ'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>tid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'å°ç‹'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h3 id="1-æµ‹è¯•ç¯å¢ƒæ­å»º"><a href="#1-æµ‹è¯•ç¯å¢ƒæ­å»º" class="headerlink" title="1. æµ‹è¯•ç¯å¢ƒæ­å»º"></a><strong>1. æµ‹è¯•ç¯å¢ƒæ­å»º</strong></h3><ol>
<li>å¯¼å…¥lombok</li>
<li>æ–°å»ºå®ä½“ç±»Teacher,Student</li>
<li>å»ºç«‹Mapperæ¥å£</li>
<li>å»ºç«‹Mapper.xmlæ–‡ä»¶</li>
<li>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ç»‘å®šæ³¨å†Œæˆ‘ä»¬çš„Mapperæ¥å£æˆ–è€…æ–‡ä»¶ ã€æ–¹å¼å¾ˆå¤šï¼Œéšå¿ƒé€‰ã€‘</li>
<li>æµ‹è¯•æŸ¥è¯¢æ˜¯å¦èƒ½å¤ŸæˆåŠŸ</li>
</ol>
<h3 id="2-æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"><a href="#2-æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†" class="headerlink" title="2. æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"></a>2. æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†</h3><pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--
	æ€è·¯ï¼š
    1. æŸ¥è¯¢æ‰€æœ‰çš„å­¦ç”Ÿä¿¡æ¯
    2. æ ¹æ®æŸ¥è¯¢å‡ºæ¥çš„å­¦ç”Ÿçš„tidå¯»æ‰¾ç‰¹å®šçš„è€å¸ˆ (å­æŸ¥è¯¢)
--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getStudent<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>StudentTeacher<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    select * from student
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>StudentTeacher<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>student<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token comment">&lt;!--
		å¤æ‚çš„å±æ€§ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬å‡ºæ¥ 
		å¯¹è±¡ï¼šassociation 
		é›†åˆï¼šcollection
	--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>teacher<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tid<span class="token punctuation">"</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>teacher<span class="token punctuation">"</span></span> <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getTeacher<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getTeacher<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>teacher<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    select * from teacher where id = #&#123;id&#125;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre>

<h3 id="3-æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†"><a href="#3-æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†" class="headerlink" title="3.æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†"></a>3.æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†</h3><pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--æŒ‰ç…§ç»“æœè¿›è¡ŒæŸ¥è¯¢--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getStudent2<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>StudentTeacher2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    select s.id sid , s.name sname, t.name tname
    from student s,teacher t
    where s.tid=t.id
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!--ç»“æœå°è£…ï¼Œå°†æŸ¥è¯¢å‡ºæ¥çš„åˆ—å°è£…åˆ°å¯¹è±¡å±æ€§ä¸­--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>StudentTeacher2<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>student<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sid<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sname<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>teacher<span class="token punctuation">"</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>teacher<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tname<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span></code></pre>

<p>å›é¡¾Mysqlå¤šå¯¹ä¸€æŸ¥è¯¢æ–¹å¼:</p>
<ul>
<li>å­æŸ¥è¯¢ ï¼ˆæŒ‰ç…§æŸ¥è¯¢åµŒå¥—ï¼‰</li>
<li>è”è¡¨æŸ¥è¯¢ ï¼ˆæŒ‰ç…§ç»“æœåµŒå¥—ï¼‰</li>
</ul>
<h2 id="11ã€ä¸€å¯¹å¤šå¤„ç†"><a href="#11ã€ä¸€å¯¹å¤šå¤„ç†" class="headerlink" title="11ã€ä¸€å¯¹å¤šå¤„ç†"></a>11ã€ä¸€å¯¹å¤šå¤„ç†</h2><blockquote>
<p>ä¸€ä¸ªè€å¸ˆå¤šä¸ªå­¦ç”Ÿï¼›</p>
<p>å¯¹äºè€å¸ˆè€Œè¨€ï¼Œå°±æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼›</p>
</blockquote>
<h3 id="1-ç¯å¢ƒæ­å»º"><a href="#1-ç¯å¢ƒæ­å»º" class="headerlink" title="1. ç¯å¢ƒæ­å»º"></a>1. ç¯å¢ƒæ­å»º</h3><p><strong>å®ä½“ç±»</strong></p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> tid<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token comment">//ä¸€ä¸ªè€å¸ˆæ‹¥æœ‰å¤šä¸ªå­¦ç”Ÿ</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> students<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="2-æŒ‰ç…§ç»“æœåµŒå¥—åµŒå¥—å¤„ç†"><a href="#2-æŒ‰ç…§ç»“æœåµŒå¥—åµŒå¥—å¤„ç†" class="headerlink" title="2. æŒ‰ç…§ç»“æœåµŒå¥—åµŒå¥—å¤„ç†"></a>2. <strong>æŒ‰ç…§ç»“æœåµŒå¥—åµŒå¥—å¤„ç†</strong></h3><pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--æŒ‰ç»“æœåµŒå¥—æŸ¥è¯¢--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getTeacher<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>StudentTeacher<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    SELECT s.id sid, s.name sname,t.name tname,t.id tid FROM student s, teacher t
    WHERE s.tid = t.id AND tid = #&#123;tid&#125;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>StudentTeacher<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Teacher<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tid<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tname<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token comment">&lt;!--å¤æ‚çš„å±æ€§ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬å¤„ç† å¯¹è±¡ï¼šassociation é›†åˆï¼šcollection
    javaType=""æŒ‡å®šå±æ€§çš„ç±»å‹ï¼
    é›†åˆä¸­çš„æ³›å‹ä¿¡æ¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ofTypeè·å–
    --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>students<span class="token punctuation">"</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Student<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sid<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sname<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tid<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tid<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span></code></pre>

<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ol>
<li>å…³è” - association ã€å¤šå¯¹ä¸€ã€‘</li>
<li>é›†åˆ - collection ã€ä¸€å¯¹å¤šã€‘</li>
<li>javaType &amp; ofType<ol>
<li>JavaTypeç”¨æ¥æŒ‡å®šå®ä½“ç±»ä¸­çš„ç±»å‹</li>
<li>ofTypeç”¨æ¥æŒ‡å®šæ˜ å°„åˆ°Listæˆ–è€…é›†åˆä¸­çš„pojoç±»å‹ï¼Œæ³›å‹ä¸­çš„çº¦æŸç±»å‹</li>
</ol>
</li>
</ol>
<p> <strong>æ³¨æ„ç‚¹ï¼š</strong></p>
<ul>
<li>ä¿è¯SQLçš„å¯è¯»æ€§ï¼Œå°½é‡ä¿è¯é€šä¿—æ˜“æ‡‚</li>
<li>æ³¨æ„ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€ï¼Œå±æ€§åå’Œå­—æ®µçš„é—®é¢˜</li>
<li>å¦‚æœé—®é¢˜ä¸å¥½æ’æŸ¥é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨æ—¥å¿—ï¼Œå»ºè®®ä½¿ç”¨Log4j</li>
</ul>
<p>é¢è¯•é«˜é¢‘</p>
<ul>
<li>Mysqlå¼•æ“</li>
<li>InnoDBåº•å±‚åŸç†</li>
<li>ç´¢å¼•</li>
<li>ç´¢å¼•ä¼˜åŒ–</li>
</ul>
<h2 id="12ã€åŠ¨æ€SQL"><a href="#12ã€åŠ¨æ€SQL" class="headerlink" title="12ã€åŠ¨æ€SQL"></a>12ã€åŠ¨æ€SQL</h2><p><strong>ä»€ä¹ˆæ˜¯åŠ¨æ€SQLï¼šåŠ¨æ€SQLå°±æ˜¯æ ¹æ®ä¸åŒçš„æ¡ä»¶ç”Ÿæˆä¸åŒçš„SQLè¯­å¥</strong></p>
<p><strong>æ‰€è°“çš„åŠ¨æ€SQLï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯SQLè¯­å¥ï¼Œåªæ˜¯æˆ‘ä»¬å¯ä»¥åœ¨SQLå±‚é¢ï¼Œå»æ‰§è¡Œä¸€ä¸ªé€»è¾‘ä»£ç </strong></p>
<hr>
<blockquote>
<p>åŠ¨æ€ SQL æ˜¯ MyBatis çš„å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ JDBC æˆ–å…¶å®ƒç±»ä¼¼çš„æ¡†æ¶ï¼Œä½ åº”è¯¥èƒ½ç†è§£æ ¹æ®ä¸åŒæ¡ä»¶æ‹¼æ¥ SQL è¯­å¥æœ‰å¤šç—›è‹¦ï¼Œä¾‹å¦‚æ‹¼æ¥æ—¶è¦ç¡®ä¿ä¸èƒ½å¿˜è®°æ·»åŠ å¿…è¦çš„ç©ºæ ¼ï¼Œè¿˜è¦æ³¨æ„å»æ‰åˆ—è¡¨æœ€åä¸€ä¸ªåˆ—åçš„é€—å·ã€‚åˆ©ç”¨åŠ¨æ€ SQLï¼Œå¯ä»¥å½»åº•æ‘†è„±è¿™ç§ç—›è‹¦ã€‚</p>
</blockquote>
<h3 id="æ­å»ºç¯å¢ƒ"><a href="#æ­å»ºç¯å¢ƒ" class="headerlink" title="æ­å»ºç¯å¢ƒ"></a>æ­å»ºç¯å¢ƒ</h3><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>mybatis<span class="token punctuation">`</span><span class="token punctuation">.</span><span class="token punctuation">`</span>blog<span class="token punctuation">`</span>  <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'åšå®¢id'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>title<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'åšå®¢æ ‡é¢˜'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>author<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'åšå®¢ä½œè€…'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'åˆ›å»ºæ—¶é—´'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>views<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'æµè§ˆé‡'</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre>

<p>åˆ›å»ºä¸€ä¸ªåŸºç¡€å·¥ç¨‹</p>
<ol>
<li><p>å¯¼åŒ…</p>
</li>
<li><p>ç¼–å†™é…ç½®æ–‡ä»¶</p>
</li>
<li><p>ç¼–å†™å®ä½“ç±»</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Blog</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> author<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Date</span> createTime<span class="token punctuation">;</span><span class="token comment">// å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> views<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>
</li>
<li><p>ç¼–å†™å®ä½“ç±»å¯¹åº”Mapperæ¥å£å’ŒMapper.xmlæ–‡ä»¶</p>
</li>
</ol>
<h3 id="IF"><a href="#IF" class="headerlink" title="IF"></a>IF</h3><pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>queryBlogIF<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    select * from blog
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title!=null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            and title = #&#123;title&#125;
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>author!=null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            and author = #&#123;author&#125;
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre>

<h3 id="choose-when-otherwise"><a href="#choose-when-otherwise" class="headerlink" title="choose (when, otherwise)"></a>choose (when, otherwise)</h3><h3 id="trimã€whereã€set"><a href="#trimã€whereã€set" class="headerlink" title="trimã€whereã€set"></a>trimã€whereã€set</h3><h3 id="SQLç‰‡æ®µ"><a href="#SQLç‰‡æ®µ" class="headerlink" title="SQLç‰‡æ®µ"></a>SQLç‰‡æ®µ</h3><p>æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°†ä¸€äº›åŠŸèƒ½çš„éƒ¨åˆ†æŠ½å–å‡ºæ¥ï¼Œæ–¹ä¾¿æœç”¨ï¼</p>
<ol>
<li><p>ä½¿ç”¨SQLæ ‡ç­¾æŠ½å–å…¬å…±éƒ¨åˆ†å¯</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>if-title-author<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title!=null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        title = #&#123;title&#125;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>author!=null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        and author = #&#123;author&#125;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>åœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹ä½¿ç”¨Includeæ ‡ç­¾å¼•ç”¨å³å¯</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>queryBlogIF<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    select * from blog
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>if-title-author<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre>

</li>
</ol>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>æœ€å¥½åŸºäºå•æ ‡æ¥å®šä¹‰SQLç‰‡æ®µ</li>
<li>ä¸è¦å­˜åœ¨whereæ ‡ç­¾</li>
</ul>
<p><strong>åŠ¨æ€SQLå°±æ˜¯åœ¨æ‹¼æ¥SQLè¯­å¥ï¼Œæˆ‘ä»¬åªè¦ä¿è¯SQLçš„æ­£ç¡®æ€§ï¼ŒæŒ‰ç…§SQLçš„æ ¼å¼ï¼Œå»æ’åˆ—ç»„åˆå°±å¯ä»¥äº†</strong></p>
<p>å»ºè®®ï¼š</p>
<ul>
<li>å…ˆåœ¨Mysqlä¸­å†™å‡ºå®Œæ•´çš„SQLï¼Œå†å¯¹åº”çš„å»ä¿®æ”¹æˆæˆ‘ä»¬çš„åŠ¨æ€SQLå®ç°é€šç”¨å³å¯</li>
</ul>
<h2 id="13ã€ç¼“å­˜"><a href="#13ã€ç¼“å­˜" class="headerlink" title="13ã€ç¼“å­˜"></a>13ã€ç¼“å­˜</h2><h3 id="13-1-ç®€ä»‹"><a href="#13-1-ç®€ä»‹" class="headerlink" title="13.1 ç®€ä»‹"></a>13.1 ç®€ä»‹</h3><blockquote>
<p>æŸ¥è¯¢ ï¼š è¿æ¥æ•°æ®åº“ï¼Œè€—èµ„æº</p>
<p> ä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœï¼Œç»™ä»–æš‚å­˜ä¸€ä¸ªå¯ä»¥ç›´æ¥å–åˆ°çš„åœ°æ–¹ â€“&gt; å†…å­˜ï¼šç¼“å­˜</p>
<p>æˆ‘ä»¬å†æ¬¡æŸ¥è¯¢çš„ç›¸åŒæ•°æ®çš„æ—¶å€™ï¼Œç›´æ¥èµ°ç¼“å­˜ï¼Œä¸èµ°æ•°æ®åº“äº†</p>
</blockquote>
<ol>
<li>ä»€ä¹ˆæ˜¯ç¼“å­˜[Cache]ï¼Ÿ<ul>
<li>å­˜åœ¨å†…å­˜ä¸­çš„ä¸´æ—¶æ•°æ®</li>
<li>å°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢çš„æ•°æ®æ”¾åœ¨ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ä¸­ï¼Œç”¨æˆ·å»æŸ¥è¯¢æ•°æ®å°±ä¸ç”¨ä»ç£ç›˜ä¸Šï¼ˆå…³ç³»å‹æ•°æ®åº“æ–‡ä»¶ï¼‰æŸ¥è¯¢ï¼Œä»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œè§£å†³äº†é«˜å¹¶å‘ç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜</li>
</ul>
</li>
<li>ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜ï¼Ÿ<ul>
<li>å‡å°‘å’Œæ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡</li>
</ul>
</li>
<li>ä»€ä¹ˆæ ·çš„æ•°æ®å¯ä»¥ä½¿ç”¨ç¼“å­˜ï¼Ÿ<ul>
<li>ç»å¸¸æŸ¥è¯¢å¹¶ä¸”ä¸ç»å¸¸æ”¹å˜çš„æ•°æ® ã€å¯ä»¥ä½¿ç”¨ç¼“å­˜ã€‘</li>
</ul>
</li>
</ol>
<h3 id="13-2-MyBatisç¼“å­˜"><a href="#13-2-MyBatisç¼“å­˜" class="headerlink" title="13.2 MyBatisç¼“å­˜"></a>13.2 MyBatisç¼“å­˜</h3><ul>
<li><p>MyBatisåŒ…å«ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢ç¼“å­˜ç‰¹æ€§ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿çš„å®šåˆ¶å’Œé…ç½®ç¼“å­˜ï¼Œç¼“å­˜å¯ä»¥æå¤§çš„æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p>
</li>
<li><p>MyBatisç³»ç»Ÿä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ï¼š</p>
<p>ä¸€çº§ç¼“å­˜</p>
<p>å’Œ</p>
<p>äºŒçº§ç¼“å­˜</p>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜å¼€å¯ï¼ˆSqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼‰</li>
<li>äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ï¼Œä»–æ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ã€‚</li>
<li>ä¸ºäº†æé«˜å¯æ‰©å±•æ€§ï¼ŒMyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£æ¥å®šä¹‰äºŒçº§ç¼“å­˜ã€‚</li>
</ul>
</li>
</ul>
<h3 id="13-3-ä¸€çº§ç¼“å­˜"><a href="#13-3-ä¸€çº§ç¼“å­˜" class="headerlink" title="13.3 ä¸€çº§ç¼“å­˜"></a>13.3 ä¸€çº§ç¼“å­˜</h3><ul>
<li>ä¸€çº§ç¼“å­˜ä¹Ÿå«æœ¬åœ°ç¼“å­˜ï¼šSqlSession<ul>
<li>ä¸æ•°æ®åº“åŒä¸€æ¬¡ä¼šè¯æœŸé—´æŸ¥è¯¢åˆ°çš„æ•°æ®ä¼šæ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­</li>
<li>ä»¥åå¦‚æœéœ€è¦è·å–ç›¸åŒçš„æ•°æ®ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œæ²¡å¿…è¦å†å»æŸ¥è¯¢æ•°æ®åº“</li>
</ul>
</li>
</ul>
<p>æµ‹è¯•æ­¥éª¤ï¼š</p>
<ol>
<li><p>å¼€å¯æ—¥å¿—</p>
</li>
<li><p>æµ‹è¯•åœ¨ä¸€ä¸ªSessionä¸­æŸ¥è¯¢ä¸¤æ¬¡è®°å½•</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"====================================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">User</span> user2 <span class="token operator">=</span>  mapper<span class="token punctuation">.</span><span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user2 <span class="token operator">==</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>
</li>
<li><p>æŸ¥çœ‹æ—¥å¿—è¾“å‡º</p>
</li>
</ol>
<p><img src="/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/blog\source_posts\mybatisç¬”è®°\20200623165129955.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<p><strong>ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µï¼š</strong></p>
<ol>
<li><p>æŸ¥è¯¢ä¸åŒçš„ä¸œè¥¿</p>
</li>
<li><p>å¢åˆ æ”¹æ“ä½œï¼Œå¯èƒ½ä¼šæ”¹å˜åŸæ¥çš„æ•°æ®ï¼Œæ‰€ä»¥å¿…å®šä¼šåˆ·æ–°ç¼“å­˜</p>
</li>
<li><p>æŸ¥è¯¢ä¸åŒçš„Mapper.xml</p>
</li>
<li><p>æ‰‹åŠ¨æ¸…ç†ç¼“å­˜</p>
<pre class="language-java" data-language="java"><code class="language-java">sqlSession<span class="token punctuation">.</span><span class="token function">clearCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

</li>
</ol>
<h3 id="13-4-äºŒçº§ç¼“å­˜"><a href="#13-4-äºŒçº§ç¼“å­˜" class="headerlink" title="13.4 äºŒçº§ç¼“å­˜"></a>13.4 äºŒçº§ç¼“å­˜</h3><ul>
<li>äºŒçº§ç¼“å­˜ä¹Ÿå«å…¨å±€ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜ä½œç”¨åŸŸå¤ªä½äº†ï¼Œæ‰€ä»¥è¯ç”Ÿäº†äºŒçº§ç¼“å­˜</li>
<li>åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ï¼Œä¸€ä¸ªåç§°ç©ºé—´ï¼Œå¯¹åº”ä¸€ä¸ªäºŒçº§ç¼“å­˜</li>
<li>å·¥ä½œæœºåˆ¶<ul>
<li>ä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«æ”¾åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­</li>
<li>å¦‚æœä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šå‘˜å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼›ä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ˜¯ï¼Œä¼šè¯å…³é—­äº†ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®è¢«ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­</li>
<li>æ–°çš„ä¼šè¯æŸ¥è¯¢ä¿¡æ¯ï¼Œå°±å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–å†…å®¹</li>
<li>ä¸åŒçš„mapperæŸ¥è¯¢å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨è‡ªå·±å¯¹åº”çš„ç¼“å­˜ï¼ˆmapï¼‰ä¸­</li>
</ul>
</li>
</ul>
<p>ä¸€çº§ç¼“å­˜å¼€å¯ï¼ˆSqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼‰</p>
<ul>
<li>äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ï¼Œä»–æ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ã€‚</li>
<li>ä¸ºäº†æé«˜å¯æ‰©å±•æ€§ï¼ŒMyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£æ¥å®šä¹‰äºŒçº§ç¼“å­˜ã€‚</li>
</ul>
<p>æ­¥éª¤ï¼š</p>
<ol>
<li><p>å¼€å¯å…¨å±€ç¼“å­˜</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--mybatis.config.xmlä¸­æ˜¾å¼çš„å¼€å¯å…¨å±€ç¼“å­˜--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cacheEnabled<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre>
</li>
<li><p>åœ¨Mapper.xmlä¸­ä½¿ç”¨ç¼“å­˜</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--åœ¨å½“å‰Mapper.xmlä¸­ä½¿ç”¨äºŒçº§ç¼“å­˜--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span>
       <span class="token attr-name">eviction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FIFO<span class="token punctuation">"</span></span>
       <span class="token attr-name">flushInterval</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>60000<span class="token punctuation">"</span></span>
       <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>512<span class="token punctuation">"</span></span>
       <span class="token attr-name">readOnly</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre>
</li>
<li><p>æµ‹è¯•</p>
<ol>
<li>é—®é¢˜ï¼šæˆ‘ä»¬éœ€è¦å°†å®ä½“ç±»åºåˆ—åŒ–ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™</li>
</ol>
</li>
</ol>
<p><strong>å°ç»“ï¼š</strong></p>
<ul>
<li>åªè¦å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œåœ¨åŒä¸€ä¸ªMapperä¸‹å°±æœ‰æ•ˆ</li>
<li>æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šå…ˆæ”¾åœ¨ä¸€çº§ç¼“å­˜ä¸­</li>
<li>åªæœ‰å½“å‰ä¼šè¯æäº¤ï¼Œæˆ–è€…å…³é—­çš„æ—¶å€™ï¼Œæ‰ä¼šæäº¤åˆ°äºŒçº§ç¼“å­˜ä¸­</li>
</ul>
<h3 id="13-5-ç¼“å­˜åŸç†"><a href="#13-5-ç¼“å­˜åŸç†" class="headerlink" title="13.5 ç¼“å­˜åŸç†"></a>13.5 ç¼“å­˜åŸç†</h3><p><img src="/2021/02/20/mybatis%E7%AC%94%E8%AE%B0/blog\source_posts\mybatisç¬”è®°\20200623165404113.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li><p>åªæœ‰æŸ¥è¯¢æ‰æœ‰ç¼“å­˜ï¼Œæ ¹æ®æ•°æ®æ˜¯å¦éœ€è¦ç¼“å­˜ï¼ˆä¿®æ”¹æ˜¯å¦é¢‘ç¹é€‰æ‹©æ˜¯å¦å¼€å¯ï¼‰useCache=â€œtrueâ€</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getUserById<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span> <span class="token attr-name">useCache</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    select * from user where id = #&#123;id&#125;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre>

</li>
</ul>
<h3 id="13-6-è‡ªå®šä¹‰ç¼“å­˜-ehcache"><a href="#13-6-è‡ªå®šä¹‰ç¼“å­˜-ehcache" class="headerlink" title="13.6 è‡ªå®šä¹‰ç¼“å­˜-ehcache"></a>13.6 è‡ªå®šä¹‰ç¼“å­˜-ehcache</h3><blockquote>
<p>Ehcacheæ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„å¼€æºJavaåˆ†å¸ƒå¼ç¼“å­˜ã€‚ä¸»è¦é¢å‘é€šç”¨ç¼“å­˜</p>
</blockquote>
<ol>
<li><p>å¯¼åŒ…</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis.caches<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-ehcache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>åœ¨mapperä¸­æŒ‡å®šä½¿ç”¨æˆ‘ä»¬çš„ehcacheç¼“å­˜å®ç°</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.mybatis.caches.ehcache.EhcacheCache<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre></li>
</ol>
</div></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2021/03/05/vue%E7%AC%94%E8%AE%B0/" rel="prev" title="vueç¬”è®°"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">vueç¬”è®°</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2021/02/03/%E6%B3%A8%E8%A7%A3%E5%92%8C%E5%8F%8D%E5%B0%84%E7%AC%94%E8%AE%B0/" rel="next" title="æ³¨è§£å’Œåå°„ç¬”è®°"><span class="post-nav-text">æ³¨è§£å’Œåå°„ç¬”è®°</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2020 â€“ 2021 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> ä»£æ™¨ä¼Ÿ</span></div><div class="live_time"><span>å’Œlsåœ¨ä¸€èµ·</span><span id="display_live_time"></span><span class="moe-text">(â—'â—¡'â—)</span><script>function blog_live_time() {
  window.setTimeout(blog_live_time, 1000);
  const start = new Date('2020-05-08T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " å¤© " + passHour + " å°æ—¶ " + passMinute + " åˆ† " + passSecond + " ç§’";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></div><script defer src="/js/utils.js"></script><script defer src="/js/hexo-theme-yun.js"></script></body></html>